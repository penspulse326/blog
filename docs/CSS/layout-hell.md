---
title: "[筆記] 切版小白的無盡地獄？重要的網格系統"
date: 2023-08-21 12:03:39
tags:
  - 程式語言
  - 學習心得
  - CSS
---

在 2022 年初我選定前端工程師作為轉職目標後，
就開始了這段~~不歸路~~漫漫長路。
而我選用的教材是 Huli 大大開設的 Lidemy 網站課程，
以及參考他自辦 bootcamp 的課綱來學習和做作業。

<!-- more -->

## 學習沿革

切版在這份課綱裡算是比較小的課程量，大部分還是著重在培養程式邏輯和 JavaScript 相關的應用。
當時我是照本宣科地自學，沒有老師批改，所以每次在切版時我自己只是草草帶過有個樣子而已，
學習後期的重心全部放在 React 上，造成我對建構網頁時前後期該做什麼，熟悉度相當不一致。

開始認知到自己對切版完全沒概念，是歷經了六角學院在 2022 年末舉辦的精神時光屋活動。
當時每週主題我都嘗試用 React 去製作，想藉此熟悉 React。
也因為我沒有使用過其他可以搭配的 CSS 框架，僅使用在課綱內學過的 styled-component，
從結果來看我也是以純手刻的方式做元件化開發。

沒有前期規劃的概念，導致我在第二週與第三週的挑戰都沒有時限內完成，
因為我經常需要一邊改樣式一邊整合 React 邏輯，
既沒有效率，最終作品的呈現也不盡人意，等於版面與功能我都沒有兼顧好。
~~可謂人財兩失。~~

---

## 在使用框架之前

雖然在參加火箭隊的面試之前我已經補完精神時光屋的題目，
但對於切版的困惑還是沒有停止，直到我看到卡斯伯老師於去年線上直播分享的主題，
才知道切版的前期規劃中，有一件非常重要的事被我忽略了：**網格系統**

直播連結：[從 Figma 到 VSCode，設計做到網頁切版](https://www.youtube.com/watch?v=qRZLtIcPdls&t=5256s&ab_channel=%E5%85%AD%E8%A7%92%E5%AD%B8%E9%99%A2)

大部分的設計稿會依循網格系統或是一套設計邏輯做出來，
也就是說網頁內許多元素的排列其實是有規律的，
但我們這些小白沒有這些前備知識的話，
一開始拿到設計稿可能會毫無頭緒從何開始。

比如各個區塊的高矮胖瘦、間距、排列順序等等，
常常開了 class 後寫了一卡車的屬性，但又有點難整理它，
或是想到什麼就寫什麼，有時會造成各個頁面的不一致性，
重複的區塊寫了好幾個差不多的屬性等等...

這時我們如果能以網格系統的概念拆解設計稿，
實作就具有規則性，後續修改也比較容易，
如果設計稿本身是沒有網格系統的，
我們也可以自己加入，方便開發上的管理跟微調。

商業上前後期的開發都是很講究效時效的，
所以會引入 Bootstrap 或 Tailwind 等等的 CSS 框架來加速開發，
不過這裡我們可以先想想看，純手刻要怎麼做到網格系統的管理模式，
之後再使用框架時也會比較有頭緒。
（雖然我自己使用的這套邏輯也是因為曾經使用過 Bootstrap 而參考它做出來的就是了...XD）

---

## 容器

以 PCHOME 首頁為例，我們可以發現從畫面最頂端導覽列的文字，
到下面的圖卡或文字等等，它們都貼齊在某個看不見的線上而不是畫面的邊緣，
這是因為這些元素都放在**容器**裡面！

![PCHOME首頁](https://drive.google.com/uc?export=view&id=18KIJ5iOfRKxx3OR0rS9hWDVlB7Y5v5hw)

在遇到大螢幕畫面很寬的情況下，
設計上會希望內容不會因為螢幕的寬度較寬，導致圖片或區塊也被拉到變形，
就會放在某個容器內，而這個容器會設定最大寬度來保證元素不會超出去。

容器通常依據設計稿的版型設定，如桌機畫面為 1920px、平板 768px、手機 375px，
最大寬度就會依序設定為：1296px、696px、348px。
（稍後會說明這些數值怎麼來的）

假如我從手機畫面開始切版，容器就會這樣寫：

```CSS
// 在 767px 以前都顯示手機畫面

.container {
    margin: 0 auto;
    max-width: 348px;
}

// 768px ~ 1199px 為平板畫面

@media (min-width: 768px) {
    max-width: 696px;
}

// 1400px 開始為桌機畫面

@media (min-width: 1400px) {
    max-width: 1296px;
}
//
```

斷點的寫法就因人而異，如果能用最少的斷點作出所有版型是最好的，
但無論如何最後都要符合在指定的解析度上設計稿所畫的樣子就對了～

---

## 格子

決定好容器的寬度後，容器內的切分會依版型分成 12 格～ 4 格等等，
手機通常是 4 格、桌機 12 格。

採用網格系統做設計的稿件，裡面的元素的大小大多也會依循格子數量做設定或排列位置！
比如下面的設計稿可以看到，導覽列的 logo 設定為 1 格寬，
主畫面的大 logo 與按鈕則是佔了 4 格並且要在第 8 格出現。

![2022F2E UI 組小菜的稿件](https://drive.google.com/uc?export=view&id=1Sk70T4CjEl42mE7LRPo4QiDsZZ9sFLIb)

先前我舉例的 1296px、696px 等等這些寬度，則是依照設計稿訂定的寬度設定的，
如果設計稿並沒有給定，直接交給框架處理就可以，或是我們可以自行觀察設計稿來決定，
例如在 1920 的版面下，設計師對大部分的元素都安排在距離螢幕邊界 400px 的地方，
我們就可以設定最大寬度為 1920 - 400\*2 = 1120px。

由於這些格子是平均分散而不是緊緊相連的，所以稿件通常也會設定好每一格的間距，稱為 gutter，
gutter 在不同的版面設計上有可能是不同寬度的，所以在撰寫 SCSS 時要注意一下規則。

知道這些概念之後，我們就可以設定格子的 class，
以下是桌機和手機版型的大概示範：

```CSS
// 格子間距

$gutter: 20px;

// 設定手機版的格子寬度 總共 4 格

@for $i from 1 through 4 {
    .col-sm-#{$i} {
        width: calc((100%-($gutter * 3))/4 * $i + $gutter * ($i-1))
    }
}

// 設定桌機版的格子寬度 總共 12 格
// 寫在 media query 裡面保證它只會在某個寬度下作用

@media (min-width: 1200px) {
    @for $i from 1 through 12 {
        .col-lg-#{$i} {
            width: calc((100%-($gutter * 11))/12 * $i + $gutter * ($i-1))
        }
    }
}
```

格子寬度的設定跟以前數學課的種樹問題是類似的，
大家不要緊張，我馬上解釋......

首先用 for 迴圈來產生一連串的 class 名稱，
然後 width 這個屬性可以透過 calc()來執行一些計算式得到寬度數值，
百分比和 px 或 em 等等不同單位的數值也可以混合計算。

由於全部格子是分散佔滿整個容器的，所以容器寬度我們視作 100%，
以桌機為例會有 12 個格子，因此有 11 個間距。
扣掉全部間距佔用的寬度 $gutter \* 11，再除以 12，就是目前這個容器的寬度下，
每個格子真正的寬度，再依照目前迴圈執行的數字來算出 1 ~ 12 格個別有多寬。

如現在迴圈跑到 $i = 6，也就是正在生成 .col-lg-6 這個 class，
從剛剛我們算出的每格寬度 (100%-($gutter \* 11))/12，
乘上 6，再加上 5 個間距，就是 .col-lg-6 實際上在畫面佔用的格子數。

透過 for 迴圈加上一些簡單的數學計算，我們就可以為每個元素加上格子的 class 設定寬度，
而且因為我們透過 @media 限制了每種版型下會作用的格子，
所以一個元素上可以加 **.col-lg-4**、 **col-md-6** 等等多種 class，
使它們可以符合設計稿上不同版型下的寬度變化！
但這邊要注意的是如果該元素已經有 col 的 class，
我們在 CSS 裡面就不要再為這個元素設 width 或有關的屬性，
否則會因為複寫的關係，使 col 計算好的寬度失效。

註：寬度計算是用 100% 而不是 max-width 設定的數字，
是因為我們只是以 max-width 來限制容器的寬度而已，
裡面的其他元素還是要依照當前的寬度，來符合設計稿的比例，如果寫死數值的話，
這些格子的寬度就會被固定住而不會照百分比拉伸。

---

## 行列變化

有了容器與格子後，我們就可以使用 flex 來輕鬆處理結構比較單純的 RWD 變版，
熟悉 Bootstrap 的人應該知道，所有擁有格子 class 的元素都要放在 row 裡面！

```CSS
.row {
    display: flex;
    flex-wrap: wrap;
}
```

row 就是一個有 flex 屬性的容器，必須搭配上 wrap 的屬性，
才能使我們設定好的元素佔有正確的格子數量並成功換行。
（沒有加入 wrap 會全部擠在同一行）

例如我們設定四個一排的元素，每個元素它們在桌機、手機上各佔 4 格、4 格，
在畫面上看起來會像是，桌機是四個元素排一橫列佔滿了 12 格，
在手機上每個元素都滿版呈現像是同一直行的排列。
（手機的 4 格就是滿版了）

因為我們設定了 wrap，以及每個元素的寬度，
所以在寬度低於桌機的斷點時，這些元素會變成滿版而像是單行排列的樣子。

![兩個版型的 row 變化](https://drive.google.com/uc?export=view&id=1ow30oZnTg__tV1RvtwPU1CJPNPjG0Wno)

這時 row 或是其他具有 flex 屬性的容器，搭配 gap 屬性就可以起到很好的分隔效果，
這些元素會依照 gap 的數值分開，並且頭尾的元素也不會產生額外的間距而要另外修改。
（gap 的左右間隔通常就是網格的 gutter，上下間隔就看稿件怎麼設定）

---

## 建立簡單的撰寫規則

純手刻的模式下，當我們寫的區塊越來越多，
CSS 檔也會慢慢變得冗長，即使使用 mixin 的方式把重複的屬性功能打包起來，
也有可能還是整理不完，這時候如果有一套撰寫規則，
就能讓閱讀的難度稍微降低！如果是多人協作的話，訂製一個大家必須遵守的規則即可。
如像我一個人做作業的時候，通常屬性撰寫上我會這樣做區分：

```CSS

div {
    // 跟 position 有關的寫在一起
    position:relative;
    top: 100px;
    left: 50px;

    // 跟 display 有關的
    display: flex;
    flex-direction: column;
    justify-content: center;

    // 跟 box model 有關的
    margin: 0 auto;
    padding: 12px 20px;
    width: 50%;
    border: 1px solid red;

    // 跟 background 有關的
    background-color: grey;
    opacity: 0.8;

    // 跟 font 有關的
    color: white;
    font-size: 20px;
    text-align: right;

    // 跟 transform 有關的
    transform: scaleX(0.5);
    transition: 0.3s;

    // 其他有的沒的
    object-fit: cover;
}

```

這是我個人的撰寫習慣，僅供參考～
只要有一套方便自己管理和修改的寫法即可，
要注意的是當我們運用**SCSS 巢狀選擇器**的方式來寫屬性時，
盡量控制在 3 層以內，否則會造成網頁生成畫面時的效能問題，
元素性質比較特別或是作用範圍較大的，
例如資訊結構較多的圖卡、或是大區塊裡面的子元素可能有互動功能等等，
最好也要另外命名一個 class 來直接選取它，
以上兩點也會都會影響閱讀程式碼的困難度。

---

在我擁有網格的概念後，最近做作業都會先依循這個方法設定一下 SCSS，
再開始做切版的準備，當然切版還有很多美美嘎嘎，和要琢磨的地方，
比如順序調換、偽元素、圖片變形、動態特效、檔案管理等等的問題，
但就不寫得太長了...單純分享一直以來我在練習切版中，
始終感到混沌但是慢慢豁然開朗的過程。

上面提到卡斯伯老師的直播，我覺得是必看的好教學～
不論最後有沒有採用 Bootstrap 來實作，裡面示範的觀念都還蠻完整且很重要，
當然以上我的作法如果有概念偏誤、混淆的地方也歡迎大家指正，
畢竟我目前還是一位前端學習者，有誤的部分就還請大家見諒<(\_ \_)>

---

## 參考資料：

- [小菜小姐的稿件](https://www.figma.com/file/sPyo1NZ2zYyUQ0Z7VAj3et/%E5%B0%8F%E8%8F%9C_WEEK2?type=design&node-id=61-6099&mode=design&t=YGd0glcr7ZgfqXIy-0)
- [Bootstrap 網格系統](https://medium.com/ivycodefive/5-bootstrap-%E7%B6%B2%E6%A0%BC%E7%B3%BB%E7%B5%B1-grid-be5779287231)
- [從 Figma 到 VSCode，設計做到網頁切版](https://www.youtube.com/watch?v=qRZLtIcPdls&t=5256s&ab_channel=%E5%85%AD%E8%A7%92%E5%AD%B8%E9%99%A2)
